<html
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        xmlns:th="http://www.thymeleaf.org"
        layout:decorate="~{layout}"
>
<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container my-3">
    <form method="post" th:object="${userUpdateForm}" th:action="@{/user/information}">
        <div role="alert" th:if="${#fields.hasAnyErrors()}">
            <div th:each="err : ${#fields.allErrors()}" th:text="${err}" />
        </div>
        <span>닉네임</span>
        <div>
            <input type="nickname" name="nickname" th:value="${users.nickname}" placeholder="닉네임을 입력해주세요" required/>
        </div>
        <span>현재 비밀번호</span>
        <div>
            <input type="password" id="password1" name="password1" placeholder="비밀번호를 입력해주세요" disabled="disabled" required/>
        </div>

        <span>신규 비밀번호</span>
        <div>
            <input type="password" id="password2" name="password2" placeholder="비밀번호를 입력해주세요" disabled="disabled" required/>
        </div>
        <div>
            <input type='button' value='수정' onclick='btnPwdActive()'/>
        </div>
        <span>이메일 주소</span>
        <div th:text="${users.email}"></div>
        <span>휴대폰 번호</span>
        <div>
            <input type="text" id="phoneNumber" name="phoneNumber" placeholder="휴대폰 번호를 입력해주세요" maxlength='11' pattern="[0-9]+" disabled="disabled" required>
        </div>
        <div>
            <input type='button' value='수정' onclick='btnPhoneActive()'/>
        </div>
        <div>
            <button type="button" id="search_addr" disabled="disabled">주소찾기</button>
        </div>
        <table>
            <tr>
                <th>광역시</th>
                <td><input type="text" id="address_1st" name="address_1st" disabled="disabled" readonly/></td>
            </tr>
            <tr>
                <th>시군구</th>
                <td><input type="text" id="address_2st" name="address_2st" disabled="disabled" readonly/></td>
            </tr>
            <tr>
                <th>동읍면리</th>
                <td><input type="text" id="address_3st" name="address_3st" disabled="disabled" readonly/></td>
            </tr>
            <tr>
                <th>도로명</th>
                <td><input type="text" id="address_4st" name="address_4st" disabled="disabled" readonly/></td>
            </tr>
            <tr>
                <th>상세 주소</th>
                <td><input type="text" id="address_detail" name="address_detail" disabled="disabled" required/></td>
            </tr>
            <tr>
                <td><input type='button' value='수정' onclick='btnAddressActive()'/></td>
            </tr>
        </table>

        <button type="submit">정보 저장</button>
    </form>
</div>
<div layout:fragment="script" class="container my-3">
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
        window.onload = function() {
            document.getElementById("search_addr").addEventListener("click", function() { //주소입력칸을 클릭하면
                //카카오 지도 발생
                new daum.Postcode({
                    oncomplete: function(data) { //선택시 입력값 세팅
                        document.getElementById("동네").value = data.address; // 주소 넣기
                        document.getElementById("광역시").value = data.sido;
                        document.getElementById("시군구").value = data.sigungu;
                        document.getElementById("동읍면리").value = data.bname;
                        document.getElementById("상세 주소").focus(); //상세입력 포커싱
                    }
                }).open();

            });
        }
    </script>
    <script>
        function btnPwdActive()  {
            const target1 = document.getElementById('password1');
            const target2 = document.getElementById('password2');
            if (target1.disabled == false){
                target1.disabled = true;
                target2.disabled = true;
            }
            else {
                target1.disabled = false;
                target2.disabled = false;
            }
        }
        function btnPhoneActive()  {
            const target1 = document.getElementById('phoneNumber');
            if (target1.disabled == false){
                target1.disabled = true;
            }
            else {
                target1.disabled = false;
            }
        }
        function btnAddressActive()  {
            const target1 = document.getElementById('address_1st');
            const target2 = document.getElementById('address_2st');
            const target3 = document.getElementById('address_3st');
            const target4 = document.getElementById('address_4st');
            const target5 = document.getElementById('address_detail');
            const target6 = document.getElementById('search_addr');
            if (target1.disabled == false && target2.disabled == false && target3.disabled == false && target4.disabled == false && target5.disabled == false && target6.disabled == false){
                target1.disabled = true;
                target2.disabled = true;
                target3.disabled = true;
                target4.disabled = true;
                target5.disabled = true;
                target6.disabled = true;
            }
            else {
                target1.disabled = false;
                target2.disabled = false;
                target3.disabled = false;
                target4.disabled = false;
                target5.disabled = false;
                target6.disabled = false;
            }
        }
    </script>
</div>
</html>